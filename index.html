<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome Onboard M/F Norr√∂na - Smyril Line</title>
    <style>
        :root {
            --primary-blue: #003366;
            --light-blue: #e6f0fa;
            --accent-gold: #d4af37;
            --text-dark: #2c3e50;
            --text-light: #ffffff;
            --bg-color: #f8f9fa;
            --danger: #e74c3c;
            --success: #27ae60;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }

        body {
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        #app-container {
            width: 100%;
            max-width: 480px;
            height: 100vh;
            max-height: 900px;
            background-color: var(--bg-color);
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
            overflow: hidden;
        }

        /* Header & Progress */
        header {
            background-color: var(--primary-blue);
            color: var(--text-light);
            padding: 15px 20px;
            text-align: center;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        header h1 { font-size: 1.3rem; letter-spacing: 1px; text-transform: uppercase; }
        
        #progress-container {
            display: flex;
            gap: 4px;
            padding: 10px 15px;
            background-color: var(--primary-blue);
        }
        .progress-segment {
            flex: 1; height: 5px; background-color: rgba(255, 255, 255, 0.2); border-radius: 3px; overflow: hidden;
        }
        .progress-fill {
            height: 100%; width: 0%; background-color: var(--accent-gold); transition: width 0.4s ease;
        }

        /* Slides Area */
        #slides-container {
            flex: 1;
            position: relative;
            overflow-y: auto;
            overflow-x: hidden;
            background: var(--bg-color);
        }

        .slide {
            display: none;
            padding: 20px;
            animation: slideIn 0.4s ease forwards;
            padding-bottom: 40px;
        }
        .slide.active { display: block; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Typography & Components */
        h2 { color: var(--primary-blue); margin-bottom: 15px; font-size: 1.6rem; border-bottom: 2px solid var(--accent-gold); padding-bottom: 5px; }
        h3 { color: var(--text-dark); margin-top: 15px; margin-bottom: 10px; font-size: 1.2rem; }
        p, li { color: var(--text-dark); line-height: 1.6; margin-bottom: 12px; font-size: 1rem; }
        ul { padding-left: 20px; margin-bottom: 15px; }
        
        .hero-img {
            width: calc(100% + 40px);
            margin: -20px -20px 20px -20px;
            height: 220px;
            object-fit: cover;
            border-bottom: 4px solid var(--accent-gold);
        }

        .card {
            background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.05); margin-bottom: 15px; border-left: 5px solid var(--primary-blue);
        }
        .card.alert { border-left-color: var(--danger); background: #fdf3f2; }
        .card.stat { border-left-color: var(--accent-gold); display: flex; align-items: center; gap: 15px;}
        .stat-num { font-size: 2rem; font-weight: bold; color: var(--primary-blue); }

        /* Department Selector */
        .dept-btn {
            display: block; width: 100%; padding: 20px; margin-bottom: 15px;
            background: #fff; border: 2px solid #ddd; border-radius: 10px;
            font-size: 1.2rem; font-weight: bold; color: var(--primary-blue);
            cursor: pointer; transition: all 0.2s; text-align: left;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .dept-btn:hover, .dept-btn:active { border-color: var(--primary-blue); background: var(--light-blue); transform: translateY(-2px); }

        /* FAQ Accordion */
        .faq-item { background: #fff; margin-bottom: 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow: hidden; }
        .faq-q { padding: 15px; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; color: var(--primary-blue); }
        .faq-a { padding: 0 15px; max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .faq-item.open .faq-a { padding: 15px; max-height: 500px; border-top: 1px solid #eee; }

        /* Navigation Bottom Bar */
        #nav-controls {
            display: flex; justify-content: space-between; padding: 15px 20px; background: #fff; border-top: 1px solid #ddd; z-index: 10;
        }
        .nav-btn {
            padding: 12px 25px; border: none; border-radius: 25px; font-size: 1rem; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .btn-back { background: #e0e0e0; color: #555; }
        .btn-next { background: var(--primary-blue); color: #fff; width: 100%; text-align: center; }
        .btn-next:active { background: #001a33; }

        /* Quiz UI */
        .quiz-option {
            display: block; width: 100%; text-align: left; padding: 16px; margin-bottom: 12px;
            background: #fff; border: 2px solid #ddd; border-radius: 8px;
            font-size: 1rem; cursor: pointer; transition: all 0.2s; color: var(--text-dark);
        }
        .quiz-option.selected { border-color: var(--primary-blue); background: var(--light-blue); font-weight: bold; }
        .quiz-feedback { margin-top: 15px; font-weight: bold; text-align: center; padding: 10px; border-radius: 5px; display: none; }
        .feedback-success { background: #d4edda; color: #155724; display: block; }
        .feedback-error { background: #f8d7da; color: #721c24; display: block; }

        /* Desktop Polish */
        @media (min-width: 481px) { #app-container { border-radius: 12px; height: 90vh; } }
    </style>
</head>
<body>

<div id="app-container">
    <header>
        <h1>Norr√∂na Navigator</h1>
    </header>
    <div id="progress-container"></div>

    <div id="slides-container">
        
        <div class="slide active" data-type="all">
            <img src="https://www.smyrilline.com/wp-content/smush-webp/2025/04/Job-1920x1325-1.jpg.webp" class="hero-img" alt="Norr√∂na Crew">
            <h2>Welcome to the Team! ‚öì</h2>
            <p>You're joining the crew of the largest passenger ship in the North Atlantic. Before you step aboard, we need to get you up to speed.</p>
            <h3>Select your department to begin:</h3>
            <button class="dept-btn" onclick="setDepartment('hotel')">üè® Hotel & Commercial</button>
            <button class="dept-btn" onclick="setDepartment('deck')">üö¢ Deck Department</button>
            <button class="dept-btn" onclick="setDepartment('engine')">‚öôÔ∏è Engine Department</button>
        </div>

        <div class="slide" data-type="all">
            <img src="https://www.smyrilline.com/wp-content/smush-webp/2025/04/Captains-9_1920x1325-1600x1104.jpg.webp" class="hero-img" alt="Captain on Bridge">
            <h2>The Beast of the Atlantic</h2>
            <p>The M/F Norr√∂na isn't just a ferry; she's an absolute powerhouse designed to conquer the North Atlantic.</p>
            
            <div class="card stat">
                <div class="stat-num">1,482</div>
                <div><strong>Passengers</strong><br>Plus up to 120 crew members.</div>
            </div>
            <div class="card stat">
                <div class="stat-num">165m</div>
                <div><strong>Length</strong><br>With a beam (width) of 30 meters.</div>
            </div>
            <div class="card stat">
                <div class="stat-num">800</div>
                <div><strong>Vehicles</strong><br>Or 130 large cargo trailers.</div>
            </div>
            <p>You're part of a massive operation. No matter your rank, your role is critical to keeping this floating city moving.</p>
        </div>

        <div class="slide" data-type="all">
            <h2>F.A.Q & Operations üó∫Ô∏è</h2>
            <p>Passengers will ask you these questions constantly. Memorize the answers!</p>
            
            <div class="faq-item" onclick="toggleFaq(this)">
                <div class="faq-q">Where do we sail? <span>+</span></div>
                <div class="faq-a">We connect Europe to the North Atlantic. Our route runs from <strong>Hirtshals (Denmark)</strong> ‚ûî <strong>T√≥rshavn (Faroe Islands)</strong> ‚ûî <strong>Sey√∞isfj√∂r√∞ur (Iceland)</strong>.</div>
            </div>
            <div class="faq-item" onclick="toggleFaq(this)">
                <div class="faq-q">How long is the crossing? <span>+</span></div>
                <div class="faq-a">Hirtshals to T√≥rshavn takes roughly 38 hours in winter, and 30 hours in summer. T√≥rshavn to Iceland takes an additional 15 hours. Top speed is 21 knots!</div>
            </div>
            <div class="faq-item" onclick="toggleFaq(this)">
                <div class="faq-q">What facilities do we have? <span>+</span></div>
                <div class="faq-a">We have 3 restaurants (like Skansagar√∞ur Buffet), a cinema, a fitness center, a gaming room, and 3 outdoor hot tubs (cleverly heated by surplus heat from the engine room!). We even have a football pitch on Deck 9!</div>
            </div>
            <div class="faq-item" onclick="toggleFaq(this)">
                <div class="faq-q">What is my schedule & pay? <span>+</span></div>
                <div class="faq-a">We work on a <strong>1:1 schedule</strong>. If you are onboard for 4 weeks, you get paid for the following 4 weeks while you are at home resting.</div>
            </div>
        </div>

        <div class="slide" data-type="all">
            <h2>Safety & Culture ü¶∫</h2>
            <p>Our safety vision is zero accidents. To succeed, we live by one rule:</p>
            <div class="card">
                <h3 style="color: var(--primary-blue); margin-top: 0;">"If you see it, you own it."</h3>
                <p>If you see a hazard, fix it or report it immediately. Do not walk past a problem.</p>
            </div>
            
            <h3>The SAFIR System</h3>
            <p>All incidents must be reported via the SAFIR document on the deck iPads. We report:</p>
            <ul>
                <li><strong>Accidents:</strong> Injury or broken material.</li>
                <li><strong>Near Miss:</strong> A situation that <em>almost</em> caused an accident.</li>
                <li><strong>Observation:</strong> Unsafe behavior or positive actions!</li>
            </ul>

            <div class="card alert">
                <strong>Zero Tolerance:</strong> Absolute 0-tolerance for alcohol and drugs on board. Violation means immediate dismissal.
            </div>
        </div>

        <div class="slide dept-slide" data-type="hotel">
            <img src="https://www.smyrilline.com/wp-content/smush-webp/2025/04/QQL8303-1920x1325-1-1600x1104.jpg.webp" class="hero-img" alt="Hotel Staff">
            <h2>Hotel & Commercial üè®</h2>
            <p>As part of the Commercial team, you are the face of Smyril Line. We turn a ferry crossing into a cruise experience.</p>
            
            <div class="card">
                <h3>The 60-Second Rule ‚è±Ô∏è</h3>
                <p>Acknowledge and greet guests within 60 seconds of arrival. Even if you are busy, make eye contact and say: <em>"I will be with you in a minute."</em></p>
            </div>

            <h3>Uniform Standards</h3>
            <ul>
                <li><strong>Shoes:</strong> Must bring your own! Black, non-slip, closed-toe, <strong>no logos or colored soles</strong>.</li>
                <li><strong>Socks:</strong> Solid black.</li>
                <li><strong>Hygiene:</strong> Hair past shoulders tied back. Minimal, discreet jewelry. No nail polish when handling food.</li>
            </ul>
        </div>

        <div class="slide dept-slide" data-type="deck">
            <img src="https://www.smyrilline.com/wp-content/smush-webp/2025/04/Deck-56_1920x1325-1600x1104.jpg.webp" class="hero-img" alt="Deck Operations">
            <h2>Deck Operations üö¢</h2>
            <p>The deck team handles the lifeblood of our operation: vehicles, cargo, and external ship maintenance.</p>
            
            <div class="card">
                <h3>1,830 Lane Meters</h3>
                <p>During loading and unloading at Hirtshals, T√≥rshavn, and Sey√∞isfj√∂r√∞ur, the hazards are highest. A task supervisor must always be present.</p>
            </div>

            <ul>
                <li><strong>Blue Book:</strong> Ensure your health certificates and STCWs are valid. Smyril Line pays for renewals, but <em>you</em> must book them.</li>
                <li><strong>Blue Bag:</strong> Secure transfer bag for money dropped to the Deck 5 depository.</li>
            </ul>
        </div>

        <div class="slide dept-slide" data-type="engine">
            <img src="https://www.smyrilline.com/wp-content/smush-webp/2025/04/Engine_Room-56_1920x1325-1600x1104.jpg.webp" class="hero-img" alt="Engine Room">
            <h2>Engine Department ‚öôÔ∏è</h2>
            <p>Welcome to the belly of the beast. You are responsible for the heartbeat of the Norr√∂na.</p>
            
            <div class="card">
                <h3>30,000 Horsepower</h3>
                <p>Norr√∂na is powered by 4 mighty W√§rtsil√§ NSD ZA40S engines. They run on heavy fuel, atomized at 470 bar pressure!</p>
            </div>

            <ul>
                <li><strong>Safety First:</strong> Hearing protection and PPE are non-negotiable.</li>
                <li><strong>Sustainability:</strong> The engines don't just move us. The shaft generators provide electricity, and surplus heat warms the passenger hot tubs!</li>
                <li><strong>Reporting:</strong> A "Near Miss" in the engine room can save lives. Report everything via SAFIR.</li>
            </ul>
        </div>

        <div class="slide" data-type="all" id="quiz-intro">
            <h2>Captain's Clearance üìù</h2>
            <p>You've read the brief. Now it's time to prove you're ready to board.</p>
            <p>You must pass this dynamic quiz to receive your digital boarding pass. The questions will cover general ship knowledge and your specific department.</p>
            <div style="text-align: center; margin-top: 30px;">
                <button class="dept-btn" style="text-align: center; background: var(--accent-gold); color: #fff; border: none;" onclick="startQuiz()">Start the Assessment</button>
            </div>
        </div>

        <div class="slide" data-type="all" id="quiz-active">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--primary-blue); font-weight: bold;">
                <span>Question <span id="q-current">1</span>/<span id="q-total">10</span></span>
            </div>
            <h3 id="question-text" style="font-size: 1.2rem; margin-bottom: 20px;"></h3>
            <div id="options-container"></div>
            <div id="quiz-feedback" class="quiz-feedback"></div>
        </div>

        <div class="slide" data-type="all" id="success-slide">
            <h2 style="color: var(--success); text-align: center; border-bottom: none;">üéâ Clearance Granted!</h2>
            <div class="card" style="text-align: center; margin-top: 10px; border-left: none; border-top: 5px solid var(--success);">
                <p style="text-transform: uppercase; letter-spacing: 2px; color: gray; font-size: 0.8rem;">Official Smyril Line</p>
                <h3 style="margin-top: 5px;">Digital Boarding Pass</h3>
                <p style="font-size: 3rem; margin: 10px 0;">üé´</p>
                <p><strong>M/F Norr√∂na</strong></p>
                <p id="pass-dept" style="color: var(--primary-blue); font-weight: bold; font-size: 1.2rem;"></p>
                <p style="color: var(--success); font-weight: bold; margin-top: 10px;">Status: CLEARED TO EMBARK</p>
            </div>
            <p style="text-align: center;">Welcome to the family. See you on board!</p>
        </div>

    </div>

    <div id="nav-controls" style="display: none;">
        <button id="btn-back" class="nav-btn btn-back" onclick="prevSlide()">Back</button>
        <button id="btn-next" class="nav-btn btn-next" onclick="nextSlide()">Continue</button>
    </div>
</div>

<script>
    // Data & State
    let userDept = '';
    let flowSlides = []; // The slides the user will actually see
    let currentSlideIdx = 0;
    
    // Quiz State
    let quizQuestions = [];
    let currentQIdx = 0;
    let selectedAnswer = null;

    // Database of questions
    const allQuestions = {
        general: [
            { q: "What is the standard work schedule onboard?", options: ["2 weeks on, 1 week off", "1:1 (e.g., 4 weeks on, 4 weeks paid off)", "Monday to Friday"], ans: 1 },
            { q: "What does the SAFIR system handle?", options: ["Ordering food supplies", "Booking passenger tickets", "Reporting accidents, near misses, and observations"], ans: 2 },
            { q: "What is our policy on alcohol and drugs?", options: ["Allowed off-duty in cabins", "Zero-tolerance at all times", "One drink allowed at dinner"], ans: 1 },
            { q: "How many passengers can the M/F Norr√∂na carry?", options: ["800", "1,482", "3,250"], ans: 1 },
            { q: "Which 3 countries does the Norr√∂na route connect?", options: ["Denmark, Norway, Iceland", "Denmark, Faroe Islands, Iceland", "UK, Faroe Islands, Iceland"], ans: 1 },
            { q: "Who is responsible for renewing your STCW certificates on time?", options: ["The Captain", "You are (though the company pays)", "The port authority"], ans: 1 },
            { q: "What is the core rule of our safety culture?", options: ["If you see it, you own it", "The captain handles everything", "Only report major accidents"], ans: 0 }
        ],
        hotel: [
            { q: "What is the '60-Second Rule'?", options: ["Clean tables within 60 seconds", "Acknowledge and greet guests within 60 seconds", "Serve drinks in under a minute"], ans: 1 },
            { q: "What type of shoes MUST you bring?", options: ["White sneakers", "All-black, non-slip, closed-toe", "Blue deck shoes"], ans: 1 },
            { q: "When can you visit the onboard Tax-Free shop?", options: ["Anytime you want", "Only during designated 'Crew Sale' times", "Crew cannot buy tax-free"], ans: 1 }
        ],
        deck: [
            { q: "How many lane meters of cargo space does Norr√∂na have?", options: ["800m", "1,830m", "3,000m"], ans: 1 },
            { q: "What is the 'Blue Bag'?", options: ["A bag for lifejackets", "A secure bag for dropping money to Deck 5", "A laundry bag"], ans: 1 },
            { q: "When are the hazards highest for the Deck department?", options: ["Sailing in the open ocean", "During passenger safety drills", "During loading and unloading operations"], ans: 2 }
        ],
        engine: [
            { q: "How much horsepower do the 4 main engines produce?", options: ["10,000 HP", "20,000 HP", "30,000 HP"], ans: 2 },
            { q: "What is the surplus engine heat used for?", options: ["Heating the outdoor passenger hot tubs", "Cooking in the galley", "Melting ice on the deck"], ans: 0 },
            { q: "What is absolutely non-negotiable in the engine room?", options: ["Wearing a tie", "Hearing protection and PPE", "Running to save time"], ans: 1 }
        ]
    };

    // UI Elements
    const domSlides = document.querySelectorAll('.slide');
    const navControls = document.getElementById('nav-controls');
    const btnBack = document.getElementById('btn-back');
    const btnNext = document.getElementById('btn-next');
    const progressContainer = document.getElementById('progress-container');

    // 1. Initialize Flow based on Department
    function setDepartment(dept) {
        userDept = dept;
        
        // Build the flow: all general slides + specific dept slides
        flowSlides = [];
        domSlides.forEach((slide, index) => {
            const type = slide.getAttribute('data-type');
            if (type === 'all' || type === dept) {
                flowSlides.push(slide);
            }
        });

        // Build Quiz
        quizQuestions = [...allQuestions.general];
        quizQuestions = quizQuestions.concat(allQuestions[dept]);
        // Shuffle questions for fun
        quizQuestions = quizQuestions.sort(() => Math.random() - 0.5);

        // Update Boarding Pass Text
        const deptNames = { hotel: "Hotel & Commercial Dept.", deck: "Deck Operations", engine: "Engine & Technical" };
        document.getElementById('pass-dept').innerText = deptNames[dept];

        // Init Progress Bar
        progressContainer.innerHTML = '';
        // -2 because the last two slides are Quiz Active and Success (handled differently)
        const progressSteps = flowSlides.length - 2; 
        for (let i = 0; i < progressSteps; i++) {
            progressContainer.innerHTML += `<div class="progress-segment"><div class="progress-fill" id="fill-${i}"></div></div>`;
        }

        navControls.style.display = 'flex';
        nextSlide(); // Move to slide 1
    }

    // 2. Navigation Logic
    function renderSlide() {
        // Hide all
        domSlides.forEach(s => s.classList.remove('active'));
        // Show current
        const activeDomSlide = flowSlides[currentSlideIdx];
        activeDomSlide.classList.add('active');

        // Update Progress Bar
        const fills = document.querySelectorAll('.progress-fill');
        fills.forEach((fill, i) => {
            if (i < currentSlideIdx - 1) fill.style.width = '100%';
            else if (i === currentSlideIdx - 1) fill.style.width = '50%';
            else fill.style.width = '0%';
        });

        // Button states
        if (currentSlideIdx === 1) {
            btnBack.style.display = 'none';
        } else {
            btnBack.style.display = 'block';
        }

        // Check if we hit the Quiz Intro
        if (activeDomSlide.id === 'quiz-intro') {
            navControls.style.display = 'none'; // Hide bottom nav, use the big start button
        } else {
            navControls.style.display = 'flex';
            btnNext.innerText = "Continue";
            btnNext.onclick = nextSlide;
        }
    }

    function nextSlide() {
        if (currentSlideIdx < flowSlides.length - 1) {
            currentSlideIdx++;
            renderSlide();
        }
    }

    function prevSlide() {
        if (currentSlideIdx > 1) { // 0 is dept selector, 1 is first content
            currentSlideIdx--;
            renderSlide();
        }
    }

    // FAQ Accordion
    function toggleFaq(element) {
        element.classList.toggle('open');
        const icon = element.querySelector('span');
        icon.innerText = element.classList.contains('open') ? '-' : '+';
    }

    // 3. Quiz Logic
    function startQuiz() {
        currentSlideIdx++; // Move to active quiz slide
        renderSlide();
        navControls.style.display = 'flex';
        btnBack.style.display = 'none'; // No going back during quiz
        btnNext.innerText = "Submit Answer";
        btnNext.onclick = submitAnswer;
        
        document.getElementById('q-total').innerText = quizQuestions.length;
        loadQuestion();
    }

    function loadQuestion() {
        const q = quizQuestions[currentQIdx];
        document.getElementById('q-current').innerText = currentQIdx + 1;
        document.getElementById('question-text').innerText = q.q;
        
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        selectedAnswer = null;
        
        const feedback = document.getElementById('quiz-feedback');
        feedback.className = 'quiz-feedback'; // reset
        
        btnNext.style.display = 'block'; // Ensure next is visible

        q.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'quiz-option';
            btn.innerText = opt;
            btn.onclick = () => {
                document.querySelectorAll('.quiz-option').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedAnswer = idx;
                feedback.className = 'quiz-feedback'; // hide error if they select
            };
            container.appendChild(btn);
        });
    }

    function submitAnswer() {
        const feedback = document.getElementById('quiz-feedback');
        
        if (selectedAnswer === null) {
            feedback.innerText = "Select an answer first, sailor!";
            feedback.className = 'quiz-feedback feedback-error';
            return;
        }

        const q = quizQuestions[currentQIdx];
        
        if (selectedAnswer === q.ans) {
            feedback.innerText = "Correct! ‚úÖ";
            feedback.className = 'quiz-feedback feedback-success';
            btnNext.style.display = 'none'; // Hide submit temporarily
            
            setTimeout(() => {
                currentQIdx++;
                if (currentQIdx >= quizQuestions.length) {
                    // Passed! Go to Success slide
                    currentSlideIdx++;
                    renderSlide();
                    navControls.style.display = 'none';
                    // Fill all progress bars
                    document.querySelectorAll('.progress-fill').forEach(f => f.style.width = '100%');
                } else {
                    loadQuestion();
                }
            }, 1000);
        } else {
            feedback.innerText = "Incorrect. Remember the brief and try again! ‚ùå";
            feedback.className = 'quiz-feedback feedback-error';
        }
    }
</script>
</body>
</html>
